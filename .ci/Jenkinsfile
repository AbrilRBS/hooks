pipeline {
    agent none

    stages {
        stage('Linux - py38') {
            agent {
                label 'Linux'
            }
            stages {
                stage('Linux - py38 - Generate environment') {
                    environment {
                        PYVER = 'py38'
                        TOXENV = 'py38-conandev'
                    }
                    steps {
                        sh '.ci/generate_env_linux.sh'
                    }
                }
                stage('Linux - py38 - conandev') {
                    environment {
                        PYVER = 'py38'
                        TOXENV = 'py38-conandev'
                    }
                    steps {
                        sh 'tox'
                    }
                }
                stage('Linux - py38 - conancurrent') {
                    environment {
                        PYVER = 'py38'
                        TOXENV = 'py38-conancurrent'
                    }
                    steps {
                        sh 'tox'
                    }
                }
            }
        }
    }
}
